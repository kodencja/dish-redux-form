(this["webpackJsonpdish-redux-form"]=this["webpackJsonpdish-redux-form"]||[]).push([[0],{220:function(e,t,a){var n={"./pizza.jpg":221,"./plaid.jpg":222,"./sandwich.jpg":223,"./soup.jpg":224,"./veg4.jpg":225};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=220},221:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/pizza.a8e2abcd.jpg"},222:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/plaid.d089c43d.jpg"},223:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/sandwich.4c85b99e.jpg"},224:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/soup.eae9ab6c.jpg"},225:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/veg4.5db3e508.jpg"},226:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n,i=a(0),s=a.n(i),r=a(37),c=a.n(r),o=(a(96),a(15)),u=a(7),l=a(230),d=a(5),p="outputStyle",m="finalResponse",f="any_change_made",b="typeSet",h="typeChange",j="imgName",y="reset",g={url:"https://jsonplaceholder.typicode.com/posts",outputStyle:{left:"0"},finalResponse:"",anyChangeMade:!1,ifTypeWasSetFirstTime:!1,typeChanged:!1,imgSrc:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{outputStyle:Object(d.a)(Object(d.a)({},e.outputStyle),{},{left:t.payload})});case m:return Object(d.a)(Object(d.a)({},e),{},{finalResponse:t.payload});case b:return Object(d.a)(Object(d.a)({},e),{},{ifTypeWasSetFirstTime:t.payload});case h:return Object(d.a)(Object(d.a)({},e),{},{typeChanged:t.payload});case y:return g;case j:return Object(d.a)(Object(d.a)({},e),{},{imgSrc:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{anyChangeMade:t.payload});default:return e}},O=Object(u.b)({form:l.a,dishes:v}),x=Object(u.c)(O,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),_=a(56),T=a.n(_),S=a(90),N=a(59),w=a(229),C=a(228),F=a(39),R=a(2),E=["input","label","meta"],D=(n=function(e,t){var a=Object(i.useMemo)((function(){if(t.dishes_opt&&void 0!==t.dishes_opt)return t.dishes_opt.map((function(e,t){return"default"===e?Object(R.jsx)("option",{defaultValue:!0,hidden:!0,children:k},t):Object(R.jsx)("option",{value:e,children:e},t)}))}),[]);return"select"===t.tagtype?Object(R.jsx)(t.tagtype,Object(d.a)(Object(d.a)(Object(d.a)({},e),t),{},{children:t.dishes_opt?a:null})):"input"===t.tagtype&&"range"===t.type?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(t.tagtype,Object(d.a)(Object(d.a)({},e),t)),Object(R.jsx)("output",{className:"bubble",style:t.left_styling,htmlFor:e.name,children:e.value})]}):Object(R.jsx)(t.tagtype,Object(d.a)(Object(d.a)({},e),t))},function(e){var t=e.input,a=e.label,i=e.meta,s=Object(F.a)(e,E),r=i.touched,c=i.error;return Object(R.jsxs)("div",{className:"input-block",children:[Object(R.jsx)("label",{htmlFor:t.name,children:a}),n(t,s),r&&c&&void 0!==c&&Object(R.jsx)("span",{className:"invalid-feedback",children:c})]})}),L=["no_of_inputs","add_class"],M=function(e){var t=e.no_of_inputs,a=e.add_class,n=Object(F.a)(e,L),s=Object(i.useContext)(U).addToInputDivRef;return 1===t?Object(R.jsx)("div",{className:"mrg-x-auto narrow",children:Object(R.jsx)("div",{className:"input-cont",children:Object(R.jsx)("div",{className:"trans "+a,ref:s,children:Object(R.jsx)(w.a,Object(d.a)({},n))})})}):Object(R.jsx)(w.a,Object(d.a)({},n))},W=function(e){var t="";return e<"00:15:00"&&(t="We need at least 15 min to prepare the dish!"),{test:new RegExp(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):((([0-5][0-9]):([0-5][0-9]))|([0-5][0-9]))$/).test(e),errorTime:t}},z=a(91),I=a.n(z),V=function(e,t){return new Promise((function(a,n){var i={method:"POST",url:t,headers:{"Content-type":"application/json"},data:JSON.stringify(e)};setTimeout((function(){I()(i).then((function(e){console.log(e.data),a(e.data)}),(function(e){n(e.message)})).catch((function(e){console.log(e.message),n(e.message)}))}),500)}))},k="Select an option",A={name:void 0,preparation_time:"00:00:00",type:k},P=Object(C.a)({form:"formRdx",validate:function(e,t){var a=e.name,n=void 0===a?"":a,i=e.preparation_time,s=void 0===i?"":i,r=e.type,c=void 0===r?"":r,o=(e.no_of_slices,e.diameter,e.spiciness_scale,e.slices_of_bread,{});if(""===n.trim()&&(o.name="Dish name is required!"),""===s.trim()&&(o.preparation_time="Preparation time is required!"),""!==c.trim()&&c!==k||(o.type="Type is required!"),t.registeredFields&&void 0!==t.registeredFields)for(var u in t.registeredFields)if(void 0!==e[u]&&""!==e[u]){var l;if(""===(l=e[u].toString().split(" ").join(""))&&(o[u]="".concat(u," is required")),"name"===u||"type"===u){e[u].length>30&&(o[u]="Use max 30 characters!");/^[a-zA-Z]+$/gim.test(l)||(o[u]="Use only letters")}else if(e[u].length>10?o[u]="The number is too big!":("0"===l||e[u]<=0)&&(o[u]="The number must exceed 0"),"preparation_time"===u){var d=W(l),p=d.test,m=d.errorTime;p||(o.preparation_time="Use only numbers in time format"),""!==m&&(o.preparation_time=m)}else{var f=/\D/gim;if("diameter"===u)(f=/^[+-]?([0-9]*[.])?[0-9]+$/).test(l)||(o[u]="Use floating no");else f.test(l)&&(o[u]="Use only integer no")}}return o}})((function(e){var t=Object(i.useContext)(U),a=t.dishState,n=t.formRdx,s=t.setType,r=t.ifTypeChanged,c=t.setFinalResp,o=t.resetDishState,u=t.checkIfAnyChangeMade,l=t.addToInputDivRef,p=t.inputDivRef,m=t.btnRef,f=e.handleSubmit,b=e.initialize,h=e.submitting,j=e.submitFailed,y=e.submitSucceeded,g=(e.initialValues,a.finalResponse);Object(i.useEffect)((function(){b(A)}),[]),Object(i.useEffect)((function(){})),Object(i.useEffect)((function(){void 0!==n&&void 0!==n.values&&n.values.type&&!a.ifTypeWasSetFirstTime&&s(!0)}),[a.anyChangeMade]);var v=function(e){return new Promise((function(t,a){var n,i=(n=e.preparation_time).length<8?n+=":00":n,s={name:e.name,preparation_time:i,type:e.type};t("pizza"===e.type?Object(d.a)(Object(d.a)({},s),{},{diameter:e.diameter,no_of_slices:e.no_of_slices}):"soup"===e.type?Object(d.a)(Object(d.a)({},s),{},{spiciness_scale:e.spiciness_scale}):Object(d.a)(Object(d.a)({},s),{},{slices_of_bread:e.slices_of_bread}))}))},O=function(){a.anyChangeMade||(console.log("resetDishState"),o(),u(!0))};return Object(R.jsxs)("form",{id:"dishes-form",onSubmit:f((function(e){return new Promise(function(){var t=Object(S.a)(T.a.mark((function t(n,i){var s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c("Wait..."),t.next=3,v(e);case 3:s=t.sent,V(s,a.url).then((function(e){c("Your order has been sent successfully!"),console.log(e),console.log("initialize startlValues"),b(A),u(!1),n()}),(function(e){throw e})).catch((function(e){console.log(e),c(e),i(new N.a(e))}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())})),children:[Object(R.jsxs)("div",{className:"row center",children:[Object(R.jsx)("div",{className:"input-cont",children:Object(R.jsx)("div",{className:"hide-left narrow-70 mrg-x-auto trans",ref:l,children:Object(R.jsx)(w.a,{name:"name",label:"Dish name",type:"text",id:"name",tagtype:"input","aria-label":"name",className:"form-control",placeholder:"Write dish name",component:D,required:!0,onChange:O})})}),Object(R.jsx)("div",{className:"input-cont",children:Object(R.jsx)("div",{className:"trans hide-right narrow-70 mrg-x-auto",ref:l,children:Object(R.jsx)(w.a,{name:"preparation_time",label:"Preparation time",type:"time",tagtype:"input",id:"preparation_time",className:"form-control",step:1,"aria-label":"preparation_time",min:"00:15:00",max:"23:59:59",pattern:"[0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]",component:D,required:!0,onChange:O})})}),Object(R.jsx)("div",{className:"input-cont",children:Object(R.jsx)("div",{className:"hide-up narrow-70 mrg-x-auto trans",ref:l,children:Object(R.jsx)(w.a,{name:"type",label:"Type",tagtype:"select",dishes_opt:["default","pizza","soup","sandwich"],component:D,"aria-label":"type",id:"type",className:"form-control form-control-lg",required:!0,onChange:function(e){O();var t=p.current.slice(0,3);p.current=[],p.current=t,"soup"!==e.target.value||n.values.spiciness_scale||b(Object(d.a)(Object(d.a)({},n.values),{},{spiciness_scale:1})),setTimeout((function(){r(!0)}),50)}})})}),void 0!==n&&void 0!==n.values&&n.values.type?"pizza"===n.values.type?Object(R.jsx)("div",{className:"mrg-x-auto",children:Object(R.jsx)("div",{className:"input-cont",children:Object(R.jsxs)("div",{className:"flex justify-center align-start hide-up trans",ref:l,children:[Object(R.jsx)(M,{tagtype:"input",label:"No of slices",name:"no_of_slices",type:"number",id:"no_of_slices",className:"form-control","aria-label":"no_of_slices",required:!(!a.ifTypeWasSetFirstTime||"pizza"!==n.values.type),min:1,max:30,component:D,parse:function(e){return e&&"0"!==e?Number(e):e}}),Object(R.jsx)(M,{tagtype:"input",label:"Diameter",name:"diameter",type:"number",id:"diameter",className:"form-control",step:.1,"aria-label":"diameter",required:!(!a.ifTypeWasSetFirstTime||"pizza"!==n.values.type),min:.1,max:50,parse:function(e,t){return e&&"0"!==e?parseFloat(e):e},component:D})]})})}):"soup"===n.values.type?Object(R.jsx)(M,{tagtype:"input",title:"Spiciness scale",name:"spiciness_scale",type:"range",id:"spiciness_scale",className:"form-control form-control-range",add_class:"range hide-left",parse:function(e){return Number(e)},step:1,"aria-label":"spiciness_scale","data-sizing":"px",min:1,max:10,component:D,meta:{inital:1},required:!(!a.ifTypeWasSetFirstTime||"soup"!==n.values.type),left_styling:a.outputStyle,no_of_inputs:1}):"sandwich"===n.values.type?Object(R.jsx)(M,{tagtype:"input",label:"No of slices",name:"slices_of_bread",type:"number",id:"slices_of_bread",className:"form-control",add_class:"number-width hide-right",parse:function(e){return Number(e)},step:1,min:1,"aria-label":"slices_of_bread",component:D,required:!(!a.ifTypeWasSetFirstTime||"sandwich"!==n.values.type),no_of_inputs:1}):null:null]}),Object(R.jsxs)("div",{className:"row center",children:[Object(R.jsx)("div",{className:"buttons col",children:Object(R.jsx)("button",{type:"submit",disabled:h,className:"btn btn-check hide-down",ref:m,children:"Submit"})}),Object(R.jsx)("p",{name:"reply",className:function(){var e="reply ";return e+=h?"wait":!h&&y?"fine":!h&&j?"bad":""}(),children:g})]})]})})),q=s.a.memo(P),U=s.a.createContext(),X=Object(o.b)((function(e){return{dishState:e.dishes,dishFormRdx:e.form}}),(function(e){return{setOutputLeft:function(t){return e(function(e){return{type:p,payload:e}}(t))},setType:function(t){return e(function(e){return{type:b,payload:e}}(t))},ifTypeChanged:function(t){return e(function(e){return{type:h,payload:e}}(t))},setImgSrc:function(t){return e({type:j,payload:t})},setFinalResp:function(t){return e({type:m,payload:t})},setMinValue:function(t){return e({type:"setMinVal",inputName:(a=t).name,payload:a.value});var a},setMaxValue:function(t){return e({type:"setMaxVal",inputName:(a=t).name,payload:a.value});var a},resetDishState:function(){return e({type:y})},checkIfAnyChangeMade:function(t){return e({type:f,payload:t})}}}))((function(e){var t=e.dishState,n=e.dishFormRdx,s=e.setOutputLeft,r=e.setType,c=e.ifTypeChanged,o=e.setImgSrc,u=e.setFinalResp,l=e.setMinValue,d=e.setMaxValue,p=e.resetDishState,m=e.checkIfAnyChangeMade,f=n.formRdx,b=Object(i.useRef)(),h=Object(i.useRef)(),j=Object(i.useRef)(),y=Object(i.useRef)(),g=Object(i.useRef)(),v=Object(i.useRef)([]);Object(i.useEffect)((function(){t.ifTypeWasSetFirstTime&&void 0!==f.values.type&&setTimeout((function(){o(f.values.type)}),500)}),[t.typeChanged]),Object(i.useEffect)((function(){void 0!==v.current&&void 0!==y.current&&function(e,t){var a=2500;void 0!==e&&null!==e&&e.forEach((function(e){var n=e.classList,i=Array.from(n),s="";if((s=i.filter((function(e){return e.startsWith("hide")}))).length>0){var r,c=s[0].substr(s[0].indexOf("-"));r=e.children[0].children[1].getAttribute("name"),""!==s&&("name"!==r&&"preparation_time"!==r&&"type"!==r?setTimeout((function(){e.classList.add("show"+c),e.classList.remove(s[0])}),100):setTimeout((function(){e.classList.add("show"+c),e.classList.remove(s[0])}),"name"===r?a:"preparation_time"===r?3200:3900))}void 0!==t&&null!==t&&t.classList.contains("hide-down")&&setTimeout((function(){t.classList.add("show-down"),t.classList.remove("hide-down")}),4600)}))}(v.current,y.current)}),[t.typeChanged]);var O=t.ifTypeWasSetFirstTime&&"soup"===f.values.type?f.values.spiciness_scale:t.ifTypeWasSetFirstTime;Object(i.useEffect)((function(){void 0!==v.current&&null!==v.current&&v.current.forEach((function(e){var t=e.children[0].children[1];if("range"===t.getAttribute("type")){var a=t.getAttribute("value");void 0!==a&&""!==a&&function(e,t,a,n){var i=getComputedStyle(t),s=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r=t.clientWidth,c=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--bubble-width")),o=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-width")),u=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-border-width"));if(void 0!==t&&null!==t){var l=parseInt(t.getAttribute("min")),d=parseInt(t.getAttribute("max")),p=100*(parseInt(e)-l)/(d-l);n(p+100*(s/2+1+(o+2*u)/2-c/2)/r-100*(s+(o+2*u))/r*p/100+a)}}(a,t,"%",s)}}))}),[O]),Object(i.useEffect)((function(){void 0!==b.current&&null!==b.current&&setTimeout((function(){b.current.classList.add("drop-fast"),b.current.classList.remove("hide-upper")}),1500),void 0!==g.current&&null!==g.current&&g.current.classList.add("hello")}),[]);var x=Object(i.useCallback)((function(e){t.typeChanged||t.ifTypeWasSetFirstTime?t.typeChanged&&e&&!v.current.includes(e)&&v.current.push(e):e&&!v.current.includes(e)&&v.current.push(e),v.current.length>=4&&setTimeout((function(){c(!1)}),1050)}),[t.typeChanged]),_=Object(R.jsx)("img",{alt:t.ifTypeWasSetFirstTime&&!t.typeChanged?f.values.type:"",className:"photo ".concat(t.typeChanged?"hide-photo":"hanging"," "),src:t.ifTypeWasSetFirstTime&&""!==t.imgSrc&&void 0!==f.values.type?a(220)("./".concat(t.imgSrc,".jpg")).default:""}),T=Object(R.jsx)("p",{className:"welcome",ref:g,children:"Hungry?"});return Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)("h2",{className:"title hide-upper",ref:b,children:"Let's have a delicious meal!"}),Object(R.jsxs)("div",{className:"dishes flex justify-center align-center",ref:j,children:[Object(R.jsx)(U.Provider,{value:{dishState:t,formRdx:f,setOutputLeft:s,setType:r,ifTypeChanged:c,setMaxValue:d,setMinValue:l,setFinalResp:u,resetDishState:p,checkIfAnyChangeMade:m,addToInputDivRef:x,inputDivRef:v,btnRef:y},children:Object(R.jsx)(q,{})}),Object(R.jsx)("div",{className:"image mrg-x-auto",children:Object(R.jsx)("div",{className:"answer",ref:h,children:t.ifTypeWasSetFirstTime&&f.values.type!==k?_:T})})]})]})}));a(226);var J=function(){return Object(R.jsx)(o.a,{store:x,children:Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(X,{})})})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,231)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),s(e),r(e)}))};c.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(J,{})}),document.getElementById("root")),$()},96:function(e,t,a){}},[[227,1,2]]]);
//# sourceMappingURL=main.6cc7ef1c.chunk.js.map