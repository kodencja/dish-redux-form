(this["webpackJsonpdish-redux-form"]=this["webpackJsonpdish-redux-form"]||[]).push([[0],{130:function(e,t,n){},254:function(e,t,n){var a={"./pizza.jpg":255,"./plaid.jpg":256,"./sandwich.jpg":257,"./soup.jpg":258,"./veg4.jpg":259};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id=254},255:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/pizza.a8e2abcd.jpg"},256:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/plaid.d089c43d.jpg"},257:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/sandwich.4c85b99e.jpg"},258:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/soup.eae9ab6c.jpg"},259:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/veg4.5db3e508.jpg"},260:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var a,i=n(0),s=n.n(i),r=n(43),c=n.n(r),o=(n(130),n(17)),u=n(8),l=n(97),d=n(6),p="outputStyle",m="finalResponse",f="any_change_made",b="typeSet",h="typeChange",j="imgName",y="reset",g="welcomeTxt",O={url:"https://jsonplaceholder.typicode.com/posts",outputStyle:{left:"0"},finalResponse:"",welcomeTxt:"Hungry?",anyChangeMade:!1,ifTypeWasSetFirstTime:!1,typeChanged:!1,imgSrc:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{outputStyle:Object(d.a)(Object(d.a)({},e.outputStyle),{},{left:t.payload})});case m:return Object(d.a)(Object(d.a)({},e),{},{finalResponse:t.payload});case g:return Object(d.a)(Object(d.a)({},e),{},{welcomeTxt:t.payload});case b:return Object(d.a)(Object(d.a)({},e),{},{ifTypeWasSetFirstTime:t.payload});case h:return Object(d.a)(Object(d.a)({},e),{},{typeChanged:t.payload});case y:return O;case j:return Object(d.a)(Object(d.a)({},e),{},{imgSrc:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{anyChangeMade:t.payload});default:return e}},x=Object(u.b)({form:l.a,dishes:v}),_=Object(u.c)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),T=n(64),S=n.n(T),N=n(99),w=n(32),C=n(95),F=n(44),R=n(96),E=n(47),W=n(2),D=["input","label","meta"],L=(a=function(e,t){var n=Object(i.useMemo)((function(){if(t.dishes_opt&&void 0!==t.dishes_opt)return t.dishes_opt.map((function(e,t){return"default"===e?Object(W.jsx)("option",{defaultValue:!0,hidden:!0,children:M},t):Object(W.jsx)("option",{value:e,children:e},t)}))}),[]);return"select"===t.tagtype?Object(W.jsx)(t.tagtype,Object(d.a)(Object(d.a)(Object(d.a)({},e),t),{},{children:t.dishes_opt?n:null})):"input"===t.tagtype&&"range"===t.type?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(t.tagtype,Object(d.a)(Object(d.a)({},e),t)),Object(W.jsx)("output",{className:"bubble",style:t.left_styling,htmlFor:e.name,children:e.value})]}):Object(W.jsx)(t.tagtype,Object(d.a)(Object(d.a)({},e),t))},function(e){var t=e.input,n=e.label,i=e.meta,s=Object(E.a)(e,D),r=i.touched,c=i.error;return Object(W.jsxs)("div",{className:"input-block",children:[Object(W.jsx)("label",{htmlFor:t.name,children:n}),a(t,s),r&&c&&void 0!==c&&Object(W.jsx)("span",{className:"invalid-feedback",children:c})]})}),z=["no_of_inputs","add_class"],I=function(e){var t=e.no_of_inputs,n=e.add_class,a=Object(E.a)(e,z),s=Object(i.useContext)(J).addToInputDivRef;return 1===t?Object(W.jsx)("div",{className:"mrg-x-auto narrow",children:Object(W.jsx)("div",{className:"input-cont",children:Object(W.jsx)("div",{className:"trans "+n,ref:s,children:Object(W.jsx)(C.a,Object(d.a)({},a))})})}):Object(W.jsx)(C.a,Object(d.a)({},a))},k=function(e){var t="";return e<"00:15:00"&&(t="We need at least 15 min to prepare the dish!"),{test:new RegExp(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):((([0-5][0-9]):([0-5][0-9]))|([0-5][0-9]))$/).test(e),errorTime:t}},A=n(100),P=n.n(A),q=function(e,t){return new Promise((function(n,a){var i={method:"POST",url:t,headers:{"Content-type":"application/json"},data:JSON.stringify(e)};setTimeout((function(){P()(i).then((function(e){console.log(e.data),n(e.data)}),(function(e){a(e.message)})).catch((function(e){console.log(e.message),a(e.message)}))}),500)}))},M="Select an option",U={name:void 0,preparation_time:"00:15:00",type:M},V=Object(R.a)({form:"formRdx",validate:function(e,t){var n=e.name,a=void 0===n?"":n,i=e.preparation_time,s=void 0===i?"":i,r=e.type,c=void 0===r?"":r,o=(e.no_of_slices,e.diameter,e.spiciness_scale,e.slices_of_bread,{});if(""===a.trim()&&(o.name="Dish name is required!"),""===s.trim()&&(o.preparation_time="Preparation time is required!"),""!==c.trim()&&c!==M||(o.type="Type is required!"),t.registeredFields&&void 0!==t.registeredFields)for(var u in t.registeredFields)if(void 0!==e[u]&&""!==e[u]){var l;if(""===(l=e[u].toString().split(" ").join(""))&&(o[u]="".concat(u," is required")),"name"===u||"type"===u){e[u].length>30&&(o[u]="Use max 30 characters!");/^[a-zA-Z]+$/gim.test(l)||(o[u]="Use only letters")}else if(e[u].length>10?o[u]="The number is too big!":("0"===l||e[u]<=0)&&(o[u]="The number must exceed 0"),"preparation_time"===u){var d=k(l),p=d.test,m=d.errorTime;p||(o.preparation_time="Use only numbers in time format"),""!==m&&(o.preparation_time=m)}else{var f=/\D/gim;if("diameter"===u)(f=/^[+-]?([0-9]*[.])?[0-9]+$/).test(l)||(o[u]="Use floating no");else f.test(l)&&(o[u]="Use only integer no")}}return o},onSubmitSuccess:function(e,t){return t(Object(F.a)("formRdx"))}})((function(e){var t=Object(i.useContext)(J),n=t.dishState,a=t.formRdx,s=t.setType,r=t.ifTypeChanged,c=t.setFinalResp,o=t.resetDishState,u=t.setWelcome,l=t.checkIfAnyChangeMade,p=t.addToInputDivRef,m=t.inputDivRef,f=t.btnRef,b=e.handleSubmit,h=e.initialize,j=e.submitting,y=e.submitFailed,g=e.submitSucceeded,O=(e.initialValues,n.finalResponse);Object(i.useEffect)((function(){h(U)}),[]),Object(i.useEffect)((function(){})),Object(i.useEffect)((function(){void 0!==a&&void 0!==a.values&&a.values.type&&!n.ifTypeWasSetFirstTime&&s(!0)}),[n.anyChangeMade]);var v=function(e){return new Promise((function(t,n){var a,i=(a=e.preparation_time).length<8?a+=":00":a,s={name:e.name,preparation_time:i,type:e.type};t("pizza"===e.type?Object(d.a)(Object(d.a)({},s),{},{diameter:e.diameter,no_of_slices:e.no_of_slices}):"soup"===e.type?Object(d.a)(Object(d.a)({},s),{},{spiciness_scale:e.spiciness_scale}):Object(d.a)(Object(d.a)({},s),{},{slices_of_bread:e.slices_of_bread}))}))},x=function(){n.anyChangeMade||(console.log("resetDishState"),o(),l(!0))};return Object(W.jsxs)("form",{id:"dishes-form",onSubmit:b((function(e){return new Promise(function(){var t=Object(N.a)(S.a.mark((function t(a,i){var s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c("Wait..."),t.next=3,v(e);case 3:s=t.sent,q(s,n.url).then((function(e){c("Your order has been sent successfully!"),u("Thank you!"),console.log(e),console.log("initialize startlValues"),h(U),l(!1),a()}),(function(e){throw e})).catch((function(e){console.log(e),c(e),i(new w.a(e))}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),children:[Object(W.jsxs)("div",{className:"row center",children:[Object(W.jsx)("div",{className:"input-cont",children:Object(W.jsx)("div",{className:"hide-left narrow-70 mrg-x-auto trans",ref:p,children:Object(W.jsx)(C.a,{name:"name",label:"Dish name",type:"text",id:"name",tagtype:"input","aria-label":"name",className:"form-control",placeholder:"Write dish name",component:L,required:!0,onChange:x})})}),Object(W.jsx)("div",{className:"input-cont",children:Object(W.jsx)("div",{className:"trans hide-right narrow-70 mrg-x-auto",ref:p,children:Object(W.jsx)(C.a,{name:"preparation_time",label:"Preparation time",type:"time",tagtype:"input",id:"preparation_time",className:"form-control",step:1,"aria-label":"preparation_time",min:"00:15:00",max:"23:59:59",pattern:"[0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]",component:L,required:!0,onChange:x})})}),Object(W.jsx)("div",{className:"input-cont",children:Object(W.jsx)("div",{className:"hide-up narrow-70 mrg-x-auto trans",ref:p,children:Object(W.jsx)(C.a,{name:"type",label:"Type",tagtype:"select",dishes_opt:["default","pizza","soup","sandwich"],component:L,"aria-label":"type",id:"type",className:"form-control form-control-lg",required:!0,onChange:function(e){x();var t=m.current.slice(0,3);m.current=[],m.current=t,"soup"!==e.target.value||a.values.spiciness_scale||h(Object(d.a)(Object(d.a)({},a.values),{},{spiciness_scale:1})),setTimeout((function(){r(!0)}),50)}})})}),void 0!==a&&void 0!==a.values&&a.values.type?"pizza"===a.values.type?Object(W.jsx)("div",{className:"mrg-x-auto",children:Object(W.jsx)("div",{className:"input-cont",children:Object(W.jsxs)("div",{className:"flex justify-center align-start hide-up trans",ref:p,children:[Object(W.jsx)(I,{tagtype:"input",label:"No of slices",name:"no_of_slices",type:"number",id:"no_of_slices",className:"form-control","aria-label":"no_of_slices",required:!(!n.ifTypeWasSetFirstTime||"pizza"!==a.values.type),min:1,max:30,component:L,parse:function(e){return e&&"0"!==e?Number(e):e}}),Object(W.jsx)(I,{tagtype:"input",label:"Diameter",name:"diameter",type:"number",id:"diameter",className:"form-control",step:.1,"aria-label":"diameter",required:!(!n.ifTypeWasSetFirstTime||"pizza"!==a.values.type),min:.1,max:50,parse:function(e,t){return e&&"0"!==e?parseFloat(e):e},component:L})]})})}):"soup"===a.values.type?Object(W.jsx)(I,{tagtype:"input",title:"Spiciness scale",name:"spiciness_scale",type:"range",id:"spiciness_scale",className:"form-control form-control-range",add_class:"range hide-left",parse:function(e){return Number(e)},step:1,"aria-label":"spiciness_scale","data-sizing":"px",min:1,max:10,component:L,meta:{inital:1},required:!(!n.ifTypeWasSetFirstTime||"soup"!==a.values.type),left_styling:n.outputStyle,no_of_inputs:1}):"sandwich"===a.values.type?Object(W.jsx)(I,{tagtype:"input",label:"No of slices",name:"slices_of_bread",type:"number",id:"slices_of_bread",className:"form-control",add_class:"number-width hide-right",parse:function(e){return Number(e)},step:1,min:1,"aria-label":"slices_of_bread",component:L,required:!(!n.ifTypeWasSetFirstTime||"sandwich"!==a.values.type),no_of_inputs:1}):null:null]}),Object(W.jsxs)("div",{className:"row center",children:[Object(W.jsx)("div",{className:"buttons col",children:Object(W.jsx)("button",{type:"submit",disabled:j,className:"btn btn-check hide-down",ref:f,children:"Submit"})}),Object(W.jsx)("p",{name:"reply",className:function(){var e="reply ";return e+=j?"wait":!j&&g?"fine":!j&&y?"bad":""}(),children:O})]})]})})),X=s.a.memo(V),J=s.a.createContext(),$=Object(o.b)((function(e){return{dishState:e.dishes,dishFormRdx:e.form}}),(function(e){return{setOutputLeft:function(t){return e(function(e){return{type:p,payload:e}}(t))},setType:function(t){return e(function(e){return{type:b,payload:e}}(t))},ifTypeChanged:function(t){return e(function(e){return{type:h,payload:e}}(t))},setImgSrc:function(t){return e({type:j,payload:t})},setFinalResp:function(t){return e({type:m,payload:t})},setWelcome:function(t){return e(function(e){return{type:g,payload:e}}(t))},resetDishState:function(){return e({type:y})},checkIfAnyChangeMade:function(t){return e({type:f,payload:t})}}}))((function(e){var t=e.dishState,a=e.dishFormRdx,s=e.setOutputLeft,r=e.setType,c=e.ifTypeChanged,o=e.setImgSrc,u=e.setFinalResp,l=e.setWelcome,d=e.resetDishState,p=e.checkIfAnyChangeMade,m=a.formRdx,f=Object(i.useRef)(),b=Object(i.useRef)(),h=Object(i.useRef)(),j=Object(i.useRef)(),y=Object(i.useRef)(),g=Object(i.useRef)([]);Object(i.useEffect)((function(){t.ifTypeWasSetFirstTime&&void 0!==m.values.type&&setTimeout((function(){o(m.values.type)}),500)}),[t.typeChanged]),Object(i.useEffect)((function(){void 0!==g.current&&void 0!==j.current&&function(e,t){var n=2500;void 0!==e&&null!==e&&e.forEach((function(e){var a=e.classList,i=Array.from(a),s="";if((s=i.filter((function(e){return e.startsWith("hide")}))).length>0){var r,c=s[0].substr(s[0].indexOf("-"));r=e.children[0].children[1].getAttribute("name"),""!==s&&("name"!==r&&"preparation_time"!==r&&"type"!==r?setTimeout((function(){e.classList.add("show"+c),e.classList.remove(s[0])}),100):setTimeout((function(){e.classList.add("show"+c),e.classList.remove(s[0])}),"name"===r?n:"preparation_time"===r?3200:3900))}void 0!==t&&null!==t&&t.classList.contains("hide-down")&&setTimeout((function(){t.classList.add("show-down"),t.classList.remove("hide-down")}),4600)}))}(g.current,j.current)}),[t.typeChanged]);var O=t.ifTypeWasSetFirstTime&&"soup"===m.values.type?m.values.spiciness_scale:t.typeChanged;Object(i.useEffect)((function(){void 0!==g.current&&null!==g.current&&g.current.forEach((function(e){var t=e.children[0].children[1];if("range"===t.getAttribute("type")){var n=t.getAttribute("value");void 0!==n&&""!==n&&function(e,t,n,a){var i=getComputedStyle(t),s=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r=t.clientWidth,c=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--bubble-width")),o=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-width")),u=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-border-width"));if(void 0!==t&&null!==t){var l=parseInt(t.getAttribute("min")),d=parseInt(t.getAttribute("max")),p=100*(parseInt(e)-l)/(d-l);a(p+100*(s/2+1+(o+2*u)/2-c/2)/r-100*(s+(o+2*u))/r*p/100+n)}}(n,t,"%",s)}}))}),[O]),Object(i.useEffect)((function(){void 0!==f.current&&null!==f.current&&setTimeout((function(){f.current.classList.add("drop-fast"),f.current.classList.remove("hide-upper")}),1500),void 0!==y.current&&null!==y.current&&y.current.classList.add("hello")}),[]);var v=Object(i.useCallback)((function(e){t.typeChanged||t.ifTypeWasSetFirstTime?t.typeChanged&&e&&!g.current.includes(e)&&g.current.push(e):e&&!g.current.includes(e)&&g.current.push(e),g.current.length>=4&&setTimeout((function(){c(!1)}),1050)}),[t.typeChanged]),x=Object(W.jsx)("img",{alt:t.ifTypeWasSetFirstTime&&!t.typeChanged?m.values.type:"",className:"photo ".concat(t.typeChanged?"hide-photo":"hanging"," "),src:t.ifTypeWasSetFirstTime&&""!==t.imgSrc&&void 0!==m.values.type?n(254)("./".concat(t.imgSrc,".jpg")).default:""}),_=Object(W.jsx)("p",{className:"welcome",ref:y,children:t.welcomeTxt});return Object(W.jsxs)("div",{className:"container",children:[Object(W.jsx)("h2",{className:"title hide-upper",ref:f,children:"Let's have a delicious meal!"}),Object(W.jsxs)("div",{className:"dishes flex justify-center align-center",ref:h,children:[Object(W.jsx)(J.Provider,{value:{dishState:t,formRdx:m,setOutputLeft:s,setType:r,ifTypeChanged:c,setFinalResp:u,resetDishState:d,setWelcome:l,checkIfAnyChangeMade:p,addToInputDivRef:v,inputDivRef:g,btnRef:j},children:Object(W.jsx)(X,{})}),Object(W.jsx)("div",{className:"image mrg-x-auto",children:Object(W.jsx)("div",{className:"answer",ref:b,children:t.ifTypeWasSetFirstTime&&m.values.type!==M?x:_})})]})]})}));n(260);var B=function(){return Object(W.jsx)(o.a,{store:_,children:Object(W.jsx)("div",{className:"App",children:Object(W.jsx)($,{})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};c.a.render(Object(W.jsx)(s.a.StrictMode,{children:Object(W.jsx)(B,{})}),document.getElementById("root")),H()}},[[261,1,2]]]);
//# sourceMappingURL=main.6f23c8df.chunk.js.map