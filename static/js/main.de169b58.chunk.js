(this["webpackJsonpdish-redux-form"]=this["webpackJsonpdish-redux-form"]||[]).push([[0],{130:function(e,t,a){},254:function(e,t,a){var n={"./pizza.jpg":255,"./plaid.jpg":256,"./sandwich.jpg":257,"./soup.jpg":258,"./veg4.jpg":259};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=254},255:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/pizza.a8e2abcd.jpg"},256:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/plaid.d089c43d.jpg"},257:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/sandwich.4c85b99e.jpg"},258:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/soup.eae9ab6c.jpg"},259:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/veg4.5db3e508.jpg"},260:function(e,t,a){},261:function(e,t,a){"use strict";a.r(t);var n,i=a(1),s=a.n(i),r=a(44),c=a.n(r),o=(a(130),a(17)),u=a(8),l=a(97),d=a(6),p="outputStyle",m="finalResponse",f="any_change_made",b="typeSet",h="typeChange",j="imgName",y="reset",g="welcomeTxt",O={url:"https://jsonplaceholder.typicode.com/posts",outputStyle:{left:"0"},finalResponse:"",welcomeTxt:"Hungry?",anyChangeMade:!1,ifTypeWasSetFirstTime:!1,typeChanged:!1,imgSrc:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{outputStyle:Object(d.a)(Object(d.a)({},e.outputStyle),{},{left:t.payload})});case m:return Object(d.a)(Object(d.a)({},e),{},{finalResponse:t.payload});case g:return Object(d.a)(Object(d.a)({},e),{},{welcomeTxt:t.payload});case b:return Object(d.a)(Object(d.a)({},e),{},{ifTypeWasSetFirstTime:t.payload});case h:return Object(d.a)(Object(d.a)({},e),{},{typeChanged:t.payload});case y:return O;case j:return Object(d.a)(Object(d.a)({},e),{},{imgSrc:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{anyChangeMade:t.payload});default:return e}},x=Object(u.b)({form:l.a,dishes:v}),_=Object(u.c)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),T=a(64),S=a.n(T),w=a(99),R=a(0),N=a.n(R),C=a(33),F=a(95),D=a(30),E=a(96),W=a(47),L=a(3),I=["input","label","meta"],q=(n=function(e,t,a){var n=Object(i.useMemo)((function(){if(a.dishes_opt&&void 0!==a.dishes_opt)return a.dishes_opt.map((function(e,t){return"default"===e?Object(L.jsx)("option",{defaultValue:!0,hidden:!0,children:V},t):Object(L.jsx)("option",{value:e,children:e},t)}))}),[]);return"select"===a.tagtype?Object(L.jsx)(a.tagtype,Object(d.a)(Object(d.a)(Object(d.a)({},e),a),{},{children:a.dishes_opt?n:null})):"input"===a.tagtype&&"range"===a.type?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(a.tagtype,Object(d.a)(Object(d.a)({},e),a)),Object(L.jsx)("output",{className:"bubble",style:a.left_styling,htmlFor:e.name,children:e.value})]}):Object(L.jsx)(a.tagtype,Object(d.a)(Object(d.a)({},e),a))},function(e){var t=e.input,a=e.label,i=e.meta,s=Object(W.a)(e,I),r=i.touched,c=i.error,o=i.valid;return Object(L.jsxs)("div",{className:["input-block",c&&r?"error":"",o&&r?"valid":""].join(" "),children:[Object(L.jsx)("label",{htmlFor:t.name,children:a}),n(t,i,s),r&&c&&void 0!==c&&Object(L.jsx)("span",{className:"invalid-feedback",children:c})]})}),k=["no_of_inputs","add_class"],z=function(e){var t=e.no_of_inputs,a=e.add_class,n=Object(W.a)(e,k),s=Object(i.useContext)(B).addToInputDivRef;return 1===t?Object(L.jsx)("div",{className:"mrg-x-auto narrow",children:Object(L.jsx)("div",{className:"input-cont",children:Object(L.jsx)("div",{className:"trans "+a,ref:s,children:Object(L.jsx)(F.a,Object(d.a)({},n))})})}):Object(L.jsx)(F.a,Object(d.a)({},n))},M=function(e){var t="";return e.length<8&&(e+=":00"),e<"00:15:00"&&(t="We need at least 15 min to prepare the dish!"),{test:new RegExp(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):((([0-5][0-9]):([0-5][0-9]))|([0-5][0-9]))$/).test(e),errorTime:t}},A=a(100),P=a.n(A),U=function(e,t){return new Promise((function(a,n){var i={method:"POST",url:t,headers:{"Content-type":"application/json"},data:JSON.stringify(e)};setTimeout((function(){P()(i).then((function(e){a(e.data)}),(function(e){n(e.message)})).catch((function(e){console.log(e.message),n(e.message)}))}),500)}))},V="Select an option",X={name:void 0,preparation_time:"00:15:00",type:V},J=Object(E.a)({form:"formRdx",validate:function(e,t){var a=e.name,n=void 0===a?"":a,i=e.preparation_time,s=void 0===i?"":i,r=e.type,c=void 0===r?"":r,o={};if(""===n.trim()&&(o.name="Dish name is required!"),""===s.trim()&&(o.preparation_time="Preparation time is required!"),""!==c.trim()&&c!==V||(o.type="Type is required!"),t.registeredFields&&void 0!==t.registeredFields)for(var u in t.registeredFields)if(void 0!==e[u]&&""!==e[u]){var l;if(""===(l=e[u].toString().split(" ").join(""))&&(o[u]="".concat(u," is required")),"name"===u||"type"===u){e[u].length>30&&(o[u]="Use max 30 characters!");/^[a-zA-Z]+$/gim.test(l)||(o[u]="Use only letters")}else if(l.length>10)o[u]="The number is too big!";else if("0"===l||e[u]<=0)o[u]="The number must exceed 0";else if("preparation_time"===u){var d=M(l),p=d.test,m=d.errorTime;p||(o.preparation_time="Use only numbers in time format"),""!==m&&(o.preparation_time=m)}else{var f=/\D/gim;if("diameter"===u)(f=/^[+-]?([0-9]*[.])?[0-9]+$/).test(l)||(o[u]="Use floating no");else f.test(l)&&(o[u]="Use only integer no")}}return o},onSubmitSuccess:function(e,t){t(Object(D.b)("formRdx")),Object(D.a)(X)}})((function(e){var t=Object(i.useContext)(B),a=t.dishState,n=t.formRdx,s=t.setType,r=t.ifTypeChanged,c=t.setFinalResp,o=t.resetDishState,u=t.setWelcome,l=t.checkIfAnyChangeMade,p=t.addToInputDivRef,m=t.inputDivRef,f=t.btnRef,b=e.handleSubmit,h=e.initialize,j=e.submitting,y=e.submitFailed,g=e.submitSucceeded,O=a.finalResponse;Object(i.useEffect)((function(){h(X)}),[]),Object(i.useEffect)((function(){void 0!==n&&void 0!==n.values&&n.values.type&&!a.ifTypeWasSetFirstTime&&s(!0)}),[a.anyChangeMade]);var v=function(e){return new Promise((function(t,a){var n,i=(n=e.preparation_time).length<8?n+=":00":n,s={name:e.name,preparation_time:i,type:e.type};t("pizza"===e.type?Object(d.a)(Object(d.a)({},s),{},{diameter:e.diameter,no_of_slices:e.no_of_slices}):"soup"===e.type?Object(d.a)(Object(d.a)({},s),{},{spiciness_scale:e.spiciness_scale}):Object(d.a)(Object(d.a)({},s),{},{slices_of_bread:e.slices_of_bread}))}))},x=function(){a.anyChangeMade||(console.log("resetDishState"),o(),l(!0))},_=function(e){return e&&"0"!==e?Number(e):e};return Object(L.jsxs)("form",{id:"dishes-form",onSubmit:b((function(e){return new Promise(function(){var t=Object(w.a)(S.a.mark((function t(n,i){var s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c("Wait..."),t.next=3,v(e);case 3:s=t.sent,U(s,a.url).then((function(e){c("Your order has been sent successfully!"),u("Thank you!"),console.log(e),l(!1),n()}),(function(e){throw e})).catch((function(e){console.log(e),c(e),i(new C.a(e))}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())})),children:[Object(L.jsxs)("div",{className:"row center",children:[Object(L.jsx)("div",{className:"input-cont",children:Object(L.jsx)("div",{className:"hide-left narrow-70 mrg-x-auto trans",ref:p,children:Object(L.jsx)(F.a,{name:"name",label:"Dish name",type:"text",id:"name",tagtype:"input","aria-label":"name",className:"form-control",placeholder:"Write dish name",component:q,required:!0,onChange:x})})}),Object(L.jsx)("div",{className:"input-cont",children:Object(L.jsx)("div",{className:"trans hide-right narrow-70 mrg-x-auto",ref:p,children:Object(L.jsx)(F.a,{name:"preparation_time",label:"Preparation time",type:"time",tagtype:"input",id:"preparation_time",className:"form-control",step:1,"aria-label":"preparation_time",min:"00:15:00",max:"23:59:59",pattern:"[0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]",component:q,required:!0,onChange:x})})}),Object(L.jsx)("div",{className:"input-cont",children:Object(L.jsx)("div",{className:"hide-up narrow-70 mrg-x-auto trans",ref:p,children:Object(L.jsx)(F.a,{name:"type",label:"Type",tagtype:"select",dishes_opt:["default","pizza","soup","sandwich"],component:q,"aria-label":"type",id:"type",className:"form-control form-control-lg",required:!0,onChange:function(e){x();var t=m.current.slice(0,3);m.current=[],m.current=t,"soup"!==e.target.value||n.values.spiciness_scale||h(Object(d.a)(Object(d.a)({},n.values),{},{spiciness_scale:1})),setTimeout((function(){r(!0)}),50)}})})}),void 0!==n&&void 0!==n.values&&n.values.type?"pizza"===n.values.type?Object(L.jsx)("div",{className:"mrg-x-auto",children:Object(L.jsx)("div",{className:"input-cont",children:Object(L.jsxs)("div",{className:"flex justify-center align-start hide-up trans",ref:p,children:[Object(L.jsx)(z,{tagtype:"input",label:"No of slices",name:"no_of_slices",type:"number",id:"no_of_slices",className:"form-control","aria-label":"no_of_slices",required:!(!a.ifTypeWasSetFirstTime||"pizza"!==n.values.type),min:1,max:30,component:q,parse:_}),Object(L.jsx)(z,{tagtype:"input",label:"Diameter",name:"diameter",type:"number",id:"diameter",className:"form-control",step:.1,"aria-label":"diameter",required:!(!a.ifTypeWasSetFirstTime||"pizza"!==n.values.type),min:.1,max:50,parse:function(e,t){return e&&"0"!==e?parseFloat(e):e},component:q})]})})}):"soup"===n.values.type?Object(L.jsx)(z,{tagtype:"input",title:"Spiciness scale",name:"spiciness_scale",type:"range",id:"spiciness_scale",className:"form-control form-control-range",add_class:"range hide-left",parse:function(e){return Number(e)},step:1,"aria-label":"spiciness_scale","data-sizing":"px",min:1,max:10,component:q,meta:{inital:1},required:!(!a.ifTypeWasSetFirstTime||"soup"!==n.values.type),left_styling:a.outputStyle,no_of_inputs:1}):"sandwich"===n.values.type?Object(L.jsx)(z,{tagtype:"input",label:"No of slices",name:"slices_of_bread",type:"number",id:"slices_of_bread",className:"form-control",add_class:"number-width hide-right",step:1,min:1,"aria-label":"slices_of_bread",component:q,required:!(!a.ifTypeWasSetFirstTime||"sandwich"!==n.values.type),no_of_inputs:1,parse:_}):null:null]}),Object(L.jsxs)("div",{className:"row center",children:[Object(L.jsx)("div",{className:"buttons col",children:Object(L.jsx)("button",{type:"submit",disabled:j,className:"btn btn-check hide-down",ref:f,children:"Submit"})}),Object(L.jsx)("p",{name:"reply",className:function(){var e="reply ";return e+=j?"wait":!j&&g?"fine":!j&&y?"bad":""}(),children:O})]})]})}));J.propTypes={DishForm:N.a.element,btnRef:N.a.oneOfType([N.a.func,N.a.shape({current:N.a.instanceOf(Element)})]),inputDivRef:N.a.arrayOf(N.a.oneOfType([N.a.func,N.a.shape({current:N.a.instanceOf(Element)})])),reset:N.a.func,afterSubmit:N.a.func,sendToServer:N.a.func,sendData:N.a.func,choosePropsToSend:N.a.func,finalTimeValidation:N.a.func,validate:N.a.func,watchForStartChangeMade:N.a.func,checkFloat:N.a.func,checkInteger:N.a.func,getReplyClasses:N.a.func,typeOnChange:N.a.func,addToInputDivRef:N.a.func,Input:N.a.element,Field:N.a.element,RenderField:N.a.element,setOutputLeft:N.a.func,setType:N.a.func,ifTypeChanged:N.a.func,setImgSrc:N.a.func,setFinalResp:N.a.func,setWelcome:N.a.func,resetDishState:N.a.func,checkIfAnyChangeMade:N.a.func,dishState:N.a.shape({url:N.a.string.isRequired,outputStyle:Object(R.exact)({left:N.a.string}).isRequired,finalResponse:N.a.string.isRequired,welcomeTxt:N.a.string.isRequired,anyChangeMade:N.a.bool.isRequired,ifTypeWasSetFirstTime:N.a.bool.isRequired,typeChanged:N.a.bool.isRequired,imgSrc:N.a.string.isRequired}),formRdx:N.a.shape({anyTouched:N.a.bool,fields:N.a.objectOf(N.a.objectOf(N.a.bool)),initial:N.a.shape({name:N.a.string,preparation_time:N.a.string,type:N.a.string}),registeredFields:N.a.shape({name:N.a.exact({name:N.a.string,type:N.a.string,count:N.a.number}),preparation_time:N.a.exact({name:N.a.string,type:N.a.string,count:N.a.number}),type:N.a.exact({name:N.a.string,type:N.a.string,count:N.a.number}),no_of_slices:N.a.exact({name:N.a.string,type:N.a.string,count:N.a.number}),diameter:N.a.exact({name:N.a.string,type:N.a.string,count:N.a.number}),spiciness_scale:N.a.exact({name:N.a.string,type:N.a.string,count:N.a.number}),slices_of_bread:N.a.exact({name:N.a.string,type:N.a.string,count:N.a.number})}),values:N.a.shape({name:N.a.string,preparation_time:N.a.string,type:N.a.string,no_of_slices:N.a.number,diameter:N.a.number,spiciness_scale:N.a.number,slices_of_bread:N.a.number})})};var $=s.a.memo(J),B=s.a.createContext(),H=Object(o.b)((function(e){return{dishState:e.dishes,dishFormRdx:e.form}}),(function(e){return{setOutputLeft:function(t){return e(function(e){return{type:p,payload:e}}(t))},setType:function(t){return e(function(e){return{type:b,payload:e}}(t))},ifTypeChanged:function(t){return e(function(e){return{type:h,payload:e}}(t))},setImgSrc:function(t){return e({type:j,payload:t})},setFinalResp:function(t){return e({type:m,payload:t})},setWelcome:function(t){return e(function(e){return{type:g,payload:e}}(t))},resetDishState:function(){return e({type:y})},checkIfAnyChangeMade:function(t){return e({type:f,payload:t})}}}))((function(e){var t=e.dishState,n=e.dishFormRdx,s=e.setOutputLeft,r=e.setType,c=e.ifTypeChanged,o=e.setImgSrc,u=e.setFinalResp,l=e.setWelcome,d=e.resetDishState,p=e.checkIfAnyChangeMade,m=n.formRdx,f=Object(i.useRef)(),b=Object(i.useRef)(),h=Object(i.useRef)(),j=Object(i.useRef)(),y=Object(i.useRef)(),g=Object(i.useRef)([]);Object(i.useEffect)((function(){t.ifTypeWasSetFirstTime&&void 0!==m.values.type&&setTimeout((function(){o(m.values.type)}),500)}),[t.typeChanged]),Object(i.useEffect)((function(){void 0!==g.current&&void 0!==j.current&&function(e,t){var a=2500;void 0!==e&&null!==e&&e.forEach((function(e){var n=e.classList,i=Array.from(n),s="";if((s=i.filter((function(e){return e.startsWith("hide")}))).length>0){var r,c=s[0].substr(s[0].indexOf("-"));r=e.children[0].children[1].getAttribute("name"),""!==s&&("name"!==r&&"preparation_time"!==r&&"type"!==r?setTimeout((function(){e.classList.add("show"+c),e.classList.remove(s[0])}),100):setTimeout((function(){e.classList.add("show"+c),e.classList.remove(s[0])}),"name"===r?a:"preparation_time"===r?3200:3900))}void 0!==t&&null!==t&&t.classList.contains("hide-down")&&setTimeout((function(){t.classList.add("show-down"),t.classList.remove("hide-down")}),4600)}))}(g.current,j.current)}),[t.typeChanged]);var O=t.ifTypeWasSetFirstTime&&"soup"===m.values.type?m.values.spiciness_scale:t.typeChanged;Object(i.useEffect)((function(){void 0!==g.current&&null!==g.current&&g.current.forEach((function(e){var t=e.children[0].children[1];if("range"===t.getAttribute("type")){var a=t.getAttribute("value");void 0!==a&&""!==a&&function(e,t,a,n){var i=getComputedStyle(t),s=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r=t.clientWidth,c=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--bubble-width")),o=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-width")),u=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-border-width"));if(void 0!==t&&null!==t){var l=parseInt(t.getAttribute("min")),d=parseInt(t.getAttribute("max")),p=100*(parseInt(e)-l)/(d-l);n(p+100*(s/2+1+(o+2*u)/2-c/2)/r-100*(s+(o+2*u))/r*p/100+a)}}(a,t,"%",s)}}))}),[O]),Object(i.useEffect)((function(){void 0!==f.current&&null!==f.current&&setTimeout((function(){f.current.classList.add("drop-fast"),f.current.classList.remove("hide-upper")}),1500),void 0!==y.current&&null!==y.current&&y.current.classList.add("hello")}),[]);var v=Object(i.useCallback)((function(e){t.typeChanged||t.ifTypeWasSetFirstTime?t.typeChanged&&e&&!g.current.includes(e)&&g.current.push(e):e&&!g.current.includes(e)&&g.current.push(e),g.current.length>=4&&setTimeout((function(){c(!1)}),1050)}),[t.typeChanged]),x=Object(L.jsx)("img",{alt:t.ifTypeWasSetFirstTime&&!t.typeChanged?m.values.type:"",className:"photo ".concat(t.typeChanged?"hide-photo":"hanging"," "),src:t.ifTypeWasSetFirstTime&&""!==t.imgSrc&&void 0!==m.values.type?a(254)("./".concat(t.imgSrc,".jpg")).default:""}),_=Object(L.jsx)("p",{className:"welcome",ref:y,children:t.welcomeTxt});return Object(L.jsxs)("div",{className:"container",children:[Object(L.jsx)("h2",{className:"title hide-upper",ref:f,children:"Let's have a delicious meal!"}),Object(L.jsxs)("div",{className:"dishes flex justify-center align-center",ref:h,children:[Object(L.jsx)(B.Provider,{value:{dishState:t,formRdx:m,setOutputLeft:s,setType:r,ifTypeChanged:c,setFinalResp:u,resetDishState:d,setWelcome:l,checkIfAnyChangeMade:p,addToInputDivRef:v,inputDivRef:g,btnRef:j},children:Object(L.jsx)($,{})}),Object(L.jsx)("div",{className:"image mrg-x-auto",children:Object(L.jsx)("div",{className:"answer",ref:b,children:t.ifTypeWasSetFirstTime&&m.values.type!==V?x:_})})]})]})}));a(260);var Y=function(){return Object(L.jsx)(o.a,{store:_,children:Object(L.jsx)("div",{className:"App",children:Object(L.jsx)(H,{})})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,262)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),s(e),r(e)}))};c.a.render(Object(L.jsx)(s.a.StrictMode,{children:Object(L.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[261,1,2]]]);
//# sourceMappingURL=main.de169b58.chunk.js.map